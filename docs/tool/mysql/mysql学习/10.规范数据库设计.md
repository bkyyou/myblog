# 10.规范数据库设计

TODO 还得再看一遍
https://www.bilibili.com/video/BV1NJ411J79W?p=35&spm_id_from=pageDriver 

## 10.1 为什么需要设计

当数据库比较复杂的时候，我们就需要设计了

糟糕的数据库设计
  * 数据冗余，浪费空间
  * 数据库插入的删除都会麻烦/异常 【屏蔽使用物理外键】
  * 程序的性能差

良好的数据库设计
  * 节省内存空间
  * 保证数据库的完整性
  * 方便我们开发系统

### 10.1.1 软件开发中，关于数据库的设计

* 分析需求： 分析业务和需要处理的数据的需求
* 概要设计： 设计关系图 E-R 图

### 10.1.2 设计数据的步骤（个人博客）

  * 收集信息，分析需求
    * 用户表 （用户登录注销，用户的个人信息，写博客，创建分类）
    * 分类表 （文件分类，谁创建的）
    * 文章表 （文件的信息）
    * 评论表 （）
    * 友链表 （友链信息）
    * 自定义表 （系统信息，某一个关键的子，或者一些主字段） key: value
    * 说说表
  
  * 标识实体 （把需求落地到）

#### 表

```s
# user
id int(10)
username varchar(60)
password varchar(60)
sex varchar(2)
age int(3)
sign varchar(200)

# category
id int(10)
category_name varchar(30)
create_user_id   int(10)

# blog
id int(10)
title varchar(100)
auther_id int(10)
category_id int(10) 文章分类
content text
```

## 10.2 三大范式 （了解）

* 信息重复
* 更新异常
* 插入异常
  * 无法正常显示信息
* 删除异常
  * 丢失有效信息


### 第一范式

原子性： 保证每一列不可再分

### 第二范式

前提： 满足第一范式

每张表只描述意见事情

### 第三范式

前提： 满足第一范式和第二范式

第三范式需要确保数据表中的每一列数据都和主键直接相关，而不嗯呢该间接相关

规范数据库的设计

规范性 和 性能的问题

关联查询的表不得超过三张表
  * 考虑商业化的需求和目标 （成本，用户体验）数据库的性能更加重要
  * 在规范性能的问题的时候，需要适当的考虑一下规范性
  * 故意给某些表增加一些冗余的字段 （从多表查询变为单表查询）
  * 故意增加一些计算列 （从大数据量降低为小数据量的查询；增加索引）



