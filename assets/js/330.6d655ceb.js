(window.webpackJsonp=window.webpackJsonp||[]).push([[330],{980:function(s,t,e){"use strict";e.r(t);var a=e(10),r=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_1-node服务部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-node服务部署"}},[s._v("#")]),s._v(" 1.node服务部署")]),s._v(" "),t("h2",{attrs:{id:"_1-1-在-node项目-根目录下创建-dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-在-node项目-根目录下创建-dockerfile"}},[s._v("#")]),s._v(" 1.1 在 node项目 根目录下创建 dockerfile")]),s._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" node:latest")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mkdir -p /home/service")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /home/service")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" . /home/service")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" npm install -g cnpm --registry=https://registry.npm.taobao.org")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" cnpm install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 4008")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" [ "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"serve.js"')]),s._v(" ]")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("怎么感觉 COPY . /home/service 没用呢 ？？？ 在创建的时候试试")])]),s._v(" "),t("ul",[t("li",[s._v("ps: 注意是根目录")])]),s._v(" "),t("h2",{attrs:{id:"docker-build"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-build"}},[s._v("#")]),s._v(" docker build")]),s._v(" "),t("div",{staticClass:"language-s extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker build -f dockerfile -t reacttestserver:0.1 .\n")])])]),t("ul",[t("li",[s._v("docker build -f 文件路径 -t 镜像名:[tag] .")])]),s._v(" "),t("h2",{attrs:{id:"运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[s._v("#")]),s._v(" 运行")]),s._v(" "),t("div",{staticClass:"language-s extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker run -d -p 3001:4008 --name testservice -v \n/home/react-admin-service-tem-test:/home/service reacttestserver:0.1\n")])])]),t("div",{staticClass:"language-s extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker run -d -p 8083:80 --name testnginx -v /var/lib/docker/volumes/nginx01:/html nginx\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);