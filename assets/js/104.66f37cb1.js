(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{564:function(s,a,t){s.exports=t.p+"assets/img/5.1.5c05bb1c.png"},910:function(s,a,t){"use strict";t.r(a);var e=t(10),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_5-shell变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-shell变量"}},[s._v("#")]),s._v(" 5.shell变量")]),s._v(" "),a("h2",{attrs:{id:"_5-1-本地变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-本地变量"}},[s._v("#")]),s._v(" 5.1.本地变量")]),s._v(" "),a("p",[s._v("定义 shell变量，变量名不需要加 $")]),s._v(" "),a("p",[s._v("本地变量只在当前 shell 生存期生效")]),s._v(" "),a("p",[a("img",{attrs:{src:t(564),alt:"本地变量"}})]),s._v(" "),a("h2",{attrs:{id:"_5-2-变量定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-变量定义"}},[s._v("#")]),s._v(" 5.2.变量定义")]),s._v(" "),a("ol",[a("li",[s._v("变量名要求：数字，字母，下划线组成，可以是字母或是下划线开头")]),s._v(" "),a("li",[s._v("变量名严格区分大小写")])]),s._v(" "),a("h2",{attrs:{id:"_5-3-取出变量值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-取出变量值"}},[s._v("#")]),s._v(" 5.3.取出变量值")]),s._v(" "),a("ol",[a("li",[s._v("单引号，所见即所得，强引用")]),s._v(" "),a("li",[s._v("双引号，输出引号里所有内容，识别特殊符号，弱引用")]),s._v(" "),a("li",[s._v("无引号，连续的符号可以不加引号，空格会引起歧义，最好使用双引号")]),s._v(" "),a("li",[s._v("反引号，引用命令执行结果，等于 $() 用法")])]),s._v(" "),a("h2",{attrs:{id:"_5-4-特殊变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-特殊变量"}},[s._v("#")]),s._v(" 5.4.特殊变量")]),s._v(" "),a("p",[s._v("shell的特殊变量，用在如 脚本， 函数传递参数使用， 有如下特殊的， 位置参数变量")]),s._v(" "),a("ol",[a("li",[s._v("$0 获取 shell 脚本文件名，以及脚本路径")]),s._v(" "),a("li",[s._v("$n 获取 shell 脚本的n个参数， n在1-9之间，如 $1, $2, $9, 大于9则需要写 ${10}, 参数空格隔开")]),s._v(" "),a("li",[s._v("$# 获取 shell 脚本的后面的参数总个数")]),s._v(" "),a("li",[s._v('$* 获取 shell 脚本所有参数，不加引号等同于 $@ 作用，加上引号 "$*" 作用是 接收所有参数为单个字符串， "$1 $2..."')]),s._v(" "),a("li",[s._v('$@ 不加引号效果同上，加引号，是接受所有参数为独立字符串， 如 "$1", "$2"\n"$3" ..., 空格保留')])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#! /bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'特殊变量 $0 $1 $2... 的实践'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'结果：'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'##########################'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'特殊变量 $# 获取参数总个数'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'结果：'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'##########################'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'特殊变量 $* 获取参数总个数'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'结果：'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'##########################'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'特殊变量 $@ 获取参数总个数'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'结果：'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("MacBook-Pro-7:shell学习1 j$ sh ./test.sh 1 2 3 4 5 6\n特殊变量 $0 $1 $2... 的实践\n结果： ./test.sh 1 2\n##########################\n特殊变量 $# 获取参数总个数\n结果： 6\n##########################\n特殊变量 $* 获取参数总个数\n结果： 1 2 3 4 5 6\n##########################\n特殊变量 $@ 获取参数总个数\n结果： 1 2 3 4 5 6\n")])])]),a("ul",[a("li",[s._v("$* $@ 区别")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"print each param from \\$\\*"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("var")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$var")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"print each param from \\$\\@"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("var")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$var")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("MacBook-Pro-7:shell学习1 j$ sh ./test.sh 1 2 3 4 5 6\nprint each param from $\\*\n1 2 3 4 5 6\nprint each param from $\\@\n1\n2\n3\n4\n5\n6\n")])])]),a("h2",{attrs:{id:"_5-5-特殊状态变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-特殊状态变量"}},[s._v("#")]),s._v(" 5.5.特殊状态变量")]),s._v(" "),a("ol",[a("li",[s._v("$? 上一次命令执行返回值，0 正确，非 0 失败")]),s._v(" "),a("li",[s._v("$$ 当前 shell 进程号")]),s._v(" "),a("li",[s._v("$! 上一次后台进程的 PID")]),s._v(" "),a("li",[s._v("$_ 得到上一次命令的最后一个参数")])]),s._v(" "),a("h2",{attrs:{id:"_5-5-1-查找特殊变量的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-1-查找特殊变量的方式"}},[s._v("#")]),s._v(" 5.5.1.查找特殊变量的方式")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("man bash\n\n搜索 Special Parameters\n")])])]),a("h2",{attrs:{id:"_5-5-2-脚本控制返回值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-2-脚本控制返回值"}},[s._v("#")]),s._v(" 5.5.2.脚本控制返回值")]),s._v(" "),a("blockquote",[a("p",[s._v("[ $# -ne 2 ] [] 与符号和数字之间必须有空格")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $# 获取参数个数    -ne 不等于的情况 && 并且")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ne")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"must be two args"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("119")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止程序运行，且返回 119 状态码 提供当前 shell 的 $? 变量，若是在函数里可以用 return 119 用法")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" ok\n")])])]),a("p",[s._v("运行完 echo $? // 打印上一次执行结果")]),s._v(" "),a("h2",{attrs:{id:"_5-5-3-获取上一次后台执行的程序-pid-获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-3-获取上一次后台执行的程序-pid-获取"}},[s._v("#")]),s._v(" 5.5.3.获取上一次后台执行的程序 PID， $!获取")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@VM-0-4-centos ~]#  nohup ping baidu.com & 1> /dev/null\n[1] 19283\n[root@VM-0-4-centos ~]# nohup: 忽略输入并把输出追加到"nohup.out"\n\n[root@VM-0-4-centos ~]# echo $!\n19283\n[root@VM-0-4-centos ~]# ps -ef|grep ping\nroot     19283 19196  0 15:37 pts/0    00:00:00 ping baidu.com\nroot     19827 19196  0 15:39 pts/0    00:00:00 grep --color=auto ping\n')])])]),a("h2",{attrs:{id:"_5-5-3-当前执行的程序-id-获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-3-当前执行的程序-id-获取"}},[s._v("#")]),s._v(" 5.5.3.当前执行的程序 ID， $$ 获取")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('echo "当前脚本执行id: $$"\n')])])]),a("h2",{attrs:{id:"_5-5-3-获取上一次命令最后一个参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-3-获取上一次命令最后一个参数"}},[s._v("#")]),s._v(" 5.5.3.获取上一次命令最后一个参数 $_")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("MacBook-Pro-7:shell学习1 j$ echo $_\n2\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);