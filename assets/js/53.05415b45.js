(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{287:function(t,s,a){t.exports=a.p+"assets/img/3.3.1f89d1b0.png"},574:function(t,s,a){t.exports=a.p+"assets/img/3.1.691785d5.png"},575:function(t,s,a){t.exports=a.p+"assets/img/3.2.f8193e22.png"},576:function(t,s,a){t.exports=a.p+"assets/img/3.5.f92b4cf2.png"},918:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_3-单元测试实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-单元测试实战"}},[t._v("#")]),t._v(" 3.单元测试实战")]),t._v(" "),s("h2",{attrs:{id:"掌握程序的三种错误类型和软件测试的关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#掌握程序的三种错误类型和软件测试的关系"}},[t._v("#")]),t._v(" 掌握程序的三种错误类型和软件测试的关系")]),t._v(" "),s("h3",{attrs:{id:"语法错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法错误"}},[t._v("#")]),t._v(" 语法错误")]),t._v(" "),s("h3",{attrs:{id:"逻辑错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑错误"}},[t._v("#")]),t._v(" 逻辑错误")]),t._v(" "),s("h3",{attrs:{id:"运行时错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行时错误"}},[t._v("#")]),t._v(" 运行时错误")]),t._v(" "),s("h2",{attrs:{id:"掌握测试的基本概念-单元测试-集成测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#掌握测试的基本概念-单元测试-集成测试"}},[t._v("#")]),t._v(" 掌握测试的基本概念：单元测试，集成测试")]),t._v(" "),s("p",[s("img",{attrs:{src:a(574),alt:"单元测试"}}),t._v(";")]),t._v(" "),s("p",[s("img",{attrs:{src:a(575),alt:"单元测试"}}),t._v(";")]),t._v(" "),s("h3",{attrs:{id:"单元测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单元测试"}},[t._v("#")]),t._v(" 单元测试")]),t._v(" "),s("p",[t._v("隔离测试单个组件")]),t._v(" "),s("p",[t._v("开发人员做的")]),t._v(" "),s("ul",[s("li",[t._v("特点：\n"),s("ul",[s("li",[t._v("测试面尽量窄")]),t._v(" "),s("li",[t._v("依赖使用桩件来实现")]),t._v(" "),s("li",[t._v("目的是只测一个组件")])])])]),t._v(" "),s("p",[t._v("纯函数适合单元测试")]),t._v(" "),s("h3",{attrs:{id:"集成测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集成测试"}},[t._v("#")]),t._v(" 集成测试")]),t._v(" "),s("p",[t._v("测试不同组件之间的交互")]),t._v(" "),s("p",[t._v("软件工程师做的")]),t._v(" "),s("ul",[s("li",[t._v("特点：\n"),s("ul",[s("li",[t._v("测试面尽量广")]),t._v(" "),s("li",[t._v("只有外部资源使用桩件来实现")]),t._v(" "),s("li",[t._v("把应用看成一个整体去测试")])])])]),t._v(" "),s("p",[t._v("集成测试最适合在浏览器中自动进行")]),t._v(" "),s("blockquote",[s("p",[t._v("注意：两种测试都需要编写，两者之间不是相互排斥的")])]),t._v(" "),s("h2",{attrs:{id:"了解单元测试的最佳实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#了解单元测试的最佳实践"}},[t._v("#")]),t._v(" 了解单元测试的最佳实践")]),t._v(" "),s("p",[t._v("面向对象的开发，单元测试指的是 接口测试， 这里的接口的指的是 类的公共方法，不是http接口")]),t._v(" "),s("blockquote",[s("p",[t._v("只测类中的共有方法")])]),t._v(" "),s("h2",{attrs:{id:"掌握单元测试的代码模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#掌握单元测试的代码模式"}},[t._v("#")]),t._v(" 掌握单元测试的代码模式")]),t._v(" "),s("p",[s("img",{attrs:{src:a(287),alt:"单元测试的套路"}}),t._v(";")]),t._v(" "),s("h2",{attrs:{id:"了解评价单元测试的指标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#了解评价单元测试的指标"}},[t._v("#")]),t._v(" 了解评价单元测试的指标")]),t._v(" "),s("p",[s("img",{attrs:{src:a(287),alt:"单元测试的指标"}}),t._v(";")]),t._v(" "),s("h2",{attrs:{id:"掌握四类覆盖率指标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#掌握四类覆盖率指标"}},[t._v("#")]),t._v(" 掌握四类覆盖率指标")]),t._v(" "),s("h3",{attrs:{id:"行覆盖率-linecoverage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#行覆盖率-linecoverage"}},[t._v("#")]),t._v(" 行覆盖率(line\tcoverage)")]),t._v(" "),s("p",[t._v("是否每一行都执行了")]),t._v(" "),s("h3",{attrs:{id:"函数覆盖率-functioncoverage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数覆盖率-functioncoverage"}},[t._v("#")]),t._v(" 函数覆盖率(function\tcoverage)")]),t._v(" "),s("p",[t._v("是否每一函数都被调用了")]),t._v(" "),s("h3",{attrs:{id:"分支覆盖率-branchcoverage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分支覆盖率-branchcoverage"}},[t._v("#")]),t._v(" 分支覆盖率(branch\tcoverage)")]),t._v(" "),s("p",[t._v("是否每个if代码块都执行了")]),t._v(" "),s("h3",{attrs:{id:"语句覆盖率-statementcoverage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语句覆盖率-statementcoverage"}},[t._v("#")]),t._v(" 语句覆盖率(statement\tcoverage)")]),t._v(" "),s("p",[t._v("是否每一语句都执行了")]),t._v(" "),s("h2",{attrs:{id:"掌握前端代码的单元测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#掌握前端代码的单元测试"}},[t._v("#")]),t._v(" 掌握前端代码的单元测试")]),t._v(" "),s("h3",{attrs:{id:"demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[t._v("#")]),t._v(" DEMO")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1. npm i -D istanbul\n2. 执行\n\t\t./node_modules/.bin/istanbul cover ./node_modules/.bin/_mocha  // 注意：是_mocha，将 mocha 作为 istanbul 的子进程执行，istanbul 为主进程 \n\t\t./node_modules/.bin/istanbul check-coverage --statement 90  // 语句覆盖率达到 90% 以上\n\n3. cd coverage/lcov-report\n\t\tbrowser-sync start --server --port 8080 --no-open --files . --ignore node_modules\n")])])]),s("h3",{attrs:{id:"前端代码测试-demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端代码测试-demo"}},[t._v("#")]),t._v(" 前端代码测试 DEMO")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 计算的案例")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 重构计算的案例")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// calc.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _h "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("perimeter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" _h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("area")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" _w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" _h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. npm init -y")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. npm i -D mocha chai istanbul")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5. 命令 ./node_modules/.bin/moche init test")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6. 编写单元测试文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// calc.test.js ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" expect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" chai"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'矩形计算的单元测试'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'w=2, h=3 => p=10, a=6'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" rect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("perimeter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("be"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("area")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("be"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 7. 修改 第五步 运行之后 产生的 index.html")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    见图片 3.5")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 8. 运行命令 browser-sync start --server --port 8080 --no-open --files . --ignore node_modules ")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 9. npm i -D mocha-headless-chrome")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 10. 运行命令 ./node_modules/.bin/mocha-headless-chrome -f test/index.html -a no-sandbox")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 11. 设置命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mocha-headless-chrome -f test/index.html -a no-sandbox"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("3.5\n"),s("img",{attrs:{src:a(576),alt:"单元测试的指标"}}),t._v(";")])])}),[],!1,null,null,null);s.default=e.exports}}]);